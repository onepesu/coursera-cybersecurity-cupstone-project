When a very long filename is given program returns 0 instead of invalid 255.