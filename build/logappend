#!/usr/bin/env python3
import sys
import logparser

full_arguments = sys.argv

if len(full_arguments) < 3:
    print('invalid')
    sys.exit(255)

mapping = {
    '-T': {'name': 'timestamp', 'max_args': 1},
    '-K': {'name': 'token', 'max_args': 1},
    '-E': {'name': 'employee', 'max_args': 1},
    '-G': {'name': 'guest', 'max_args': 1},
    '-R': {'name': 'room_id', 'max_args': 1},
    '-A': {'name': 'arrival', 'is_flag': True},
    '-L': {'name': 'departure', 'is_flag': True},
    '-B': {'name': 'batch_file', 'is_flag': True}
}

log_file = full_arguments[-1]
try:
    arguments = logparser.parse_args(full_arguments[1:-1], mapping)
except logparser.ValidationError:
    print('invalid')
    sys.exit(255)

print(arguments)
